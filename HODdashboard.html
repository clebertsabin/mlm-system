<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <title>HOD Dashboard</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            background: #f0f4f8;
            height: 100%;
        }


        main {
            flex: 1;
        }

        header {
            background-color: #2c3e50;
            padding: 1rem;
            color: white;
            text-align: center;
        }

        nav {
            display: flex;
            justify-content: space-around;
            background-color: #34495e;
            padding: 0.5rem;
            border: 0px;
        }

        nav a {
            color: white;
            text-decoration: none;
            font-weight: bold;
        }

        nav a:hover {
            text-decoration: underline;
        }

        .tabs {
            display: flex;
            justify-content: center;
            background: #d7dadc;
            padding: 10px;
        }

        .tabs button {
            margin: 0 10px;
            padding: 10px 20px;
            border: none;
            background: white;
            border-radius: 5px;
            cursor: pointer;
        }

        .tabs button.active {
            background: #2c3e50;
            color: white;
        }

        .content {
            padding: 20px;
        }

        .tab-content {
            display: none;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
        }

        th,
        td {
            padding: 12px;
            border-bottom: 1px solid #ddd;
            text-align: left;
        }

        .actions button {
            margin-right: 5px;
            padding: 6px 10px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        .assign-form {
            background: white;
            padding: 20px;
            border-radius: 8px;
            max-width: 500px;
            margin: auto;
        }

        input,
        select {
            width: 100%;
            margin: 10px 0;
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #ccc;
        }

        .approve {
            background: #4CAF50;
            color: white;
        }

        .deny {
            background: #f44336;
            color: white;
        }

        footer {
            background-color: #2c3e50;
            color: white;
            text-align: center;
            padding: 1rem;
            width: 100%;
            bottom: 0;
        }

     
    /* Sidebar styles */

    .sidebar {
      position: fixed;
      top: 0;
      left: -250px;
      width: 250px;
      height: 100%;
      background-color: #34495e;
      padding-top: 60px;
      transition: left 0.3s;
      z-index: 1001;
    }

    .sidebar.open {
      left: 0;
    }

    .sidebar a {
      display: block;
      color: #ecf0f1;
      padding: 1rem;
      text-decoration: none;
      text-align: left;
    }

    .sidebar a:hover {
      background-color: #2c3e50;
    }

    .hamburger-container {
      position: absolute;
      top: 1rem;
      left: 1rem;
    }

    .hamburger-btn {
      background: none;
      border: none;
      cursor: pointer;
    }

    .hamburger-btn span {
      display: block;
      width: 25px;
      height: 3px;
      margin: 5px;
      background-color: #ecf0f1;
    }

    .overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      display: none;
      z-index: 1000;
    }

    .overlay.show {
      display: block;
    }
    /* Profile section within the sidebar */
    .sidebar .profile {
      text-align: center;
      padding: 1rem 0;
      border-bottom: 1px solid #2c3e50;
    }
    
    .sidebar .profile img {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      object-fit: cover;
      margin-bottom: 0.5rem;
    }
    
    .sidebar .profile h3 {
      color: #ecf0f1;
      font-size: 1.1rem;
      margin: 0;
    }
    

    </style>
</head>

<body>

    <header>
        <h1>HOD Dashboard</h1>


        <div class="hamburger-container">
            <button id="menu-btn" class="hamburger-btn">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
        <!-- Sidebar -->
        <div id="sidebar" class="sidebar">
            <div class="profile">
                <img src="path/to/profile.jpg" alt="User Profile Picture" />
                <h3>John Doe</h3>
            </div>
            <a href="profile.html"><i class="fas fa-user"></i> My Profile</a>
            <a href="privacy setting.html"><i class="fas fa-lock"></i> Privacy & Settings</a>
            <a href="help.html"><i class="fas fa-question-circle"></i> Help</a>
            <a href="loginmlms.html"><i class="fas fa-sign-out-alt"></i> Logout</a>
        </div>

        <!-- Overlay -->
        <div id="overlay" class="overlay hidden"></div>
        <script>
            const menuBtn = document.getElementById('menu-btn');
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('overlay');

            menuBtn.addEventListener('click', () => {
                sidebar.classList.add('open');
                overlay.classList.add('show');
            });

            overlay.addEventListener('click', () => {
                sidebar.classList.remove('open');
                overlay.classList.remove('show');
            });
        </script>


        <nav>
            <a href="dashboard.html">Dashboard</a>
            <a href="leave page.html">Leave Requests</a>
            <a href="mission page.html">Mission Requests</a>
            <a href="request page.html">My Requests</a>

        </nav>
    </header>

    <div class="tabs">
        <button class="tab-btn active" onclick="switchTab('assign')">Assign Mission</button>
        <button class="tab-btn" onclick="switchTab('mission')">Mission Requests</button>
        <button class="tab-btn" onclick="switchTab('leave')">Leave Requests</button>
    </div>

    <div class="content">
        <!-- Assign Mission Tab -->
        <div id="assign" class="tab-content" style="display: block;">
            <h2 style="text-align: center;">Assign Mission to Employee</h2>
            <div class="assign-form">
                <label>Employee Name</label>
                <select id="employeeName">
                    <option value="">Select Employee</option>
                    <option value="John Doe">John Doe</option>
                    <option value="Mary K.">Mary K.</option>
                </select>
                <label>Mission Purpose</label>
                <input type="text" id="missionPurpose" placeholder="Enter mission details">
                <label>From Date</label>
                <input type="date" id="fromDate">
                <label>To Date</label>
                <input type="date" id="toDate">
                <button onclick="assignMission()"
                    style="background-color:#2c3e50; border: none; padding: 1rem; border-radius: 10px;color: white; ">Assign
                    Mission</button>
            </div>
        </div>

        <!-- Mission Requests -->
        <div id="mission" class="tab-content">
            <h2>Pending Mission Requests</h2>
            <table id="missionTable">
                <tr>
                    <th>Employee</th>
                    <th>Purpose</th>
                    <th>Dates</th>
                    <th>Actions</th>
                </tr>
            </table>
        </div>

        <!-- Leave Requests -->
        <div id="leave" class="tab-content">
            <h2>Pending Leave Requests</h2>
            <table id="leaveTable">
                <tr>
                    <th>Employee</th>
                    <th>Reason</th>
                    <th>Dates</th>
                    <th>Actions</th>
                </tr>
                <tr>
                    <td>Mary K.</td>
                    <td>Medical Leave</td>
                    <td>May 10 - May 15</td>
                    <td class="actions">
                        <button class="approve" onclick="approveRequest(this, 'leave')">Approve</button>
                        <button class="deny" onclick="denyRequest(this)">Deny</button>
                    </td>
                </tr>
            </table>
        </div>
    </div>


    <script>
        function switchTab(tabName) {
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(tab => tab.style.display = 'none');
            document.querySelector(`.tab-btn[onclick*='${tabName}']`).classList.add('active');
            document.getElementById(tabName).style.display = 'block';
            if (tabName === 'mission') loadMissions();
            if (tabName === 'leave') loadLeaves();
        }

        function assignMission() {
            const name = document.getElementById('employeeName').value;
            const purpose = document.getElementById('missionPurpose').value;
            const from = document.getElementById('fromDate').value;
            const to = document.getElementById('toDate').value;

            if (!name || !purpose || !from || !to) {
                alert("Please fill out all fields.");
                return;
            }

            fetch('/api/missions', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ name, purpose, from, to })
            })
                .then(res => res.json())
                .then(() => {
                    alert("Mission assigned successfully!");
                    switchTab('mission');
                });
        }

        function loadMissions() {
            fetch('/api/missions')
                .then(res => res.json())
                .then(data => {
                    const table = document.getElementById('missionTable');
                    table.innerHTML = `<tr><th>Employee</th><th>Purpose</th><th>Dates</th><th>Actions</th></tr>`;
                    data.forEach(item => {
                        const row = table.insertRow(-1);
                        row.innerHTML = `
                  <td>${item.name}</td>
                  <td>${item.purpose}</td>
                  <td>${item.from} - ${item.to}</td>
                  <td class="actions">
                    <button class="approve" onclick="approveRequest(this, 'mission')">Approve</button>
                    <button class="deny" onclick="denyRequest(this)">Deny</button>
                  </td>
                `;
                    });
                });
        }

        function loadLeaves() {
            fetch('/api/leaves')
                .then(res => res.json())
                .then(data => {
                    const table = document.getElementById('leaveTable');
                    table.innerHTML = `<tr><th>Employee</th><th>Reason</th><th>Dates</th><th>Actions</th></tr>`;
                    data.forEach(item => {
                        const row = table.insertRow(-1);
                        row.innerHTML = `
                  <td>${item.name}</td>
                  <td>${item.reason}</td>
                  <td>${item.from} - ${item.to}</td>
                  <td class="actions">
                    <button class="approve" onclick="approveRequest(this, 'leave')">Approve</button>
                    <button class="deny" onclick="denyRequest(this)">Deny</button>
                  </td>
                `;
                    });
                });
        }

        function approveRequest(button, type) {
            const row = button.closest('tr');
            row.style.background = "#e0ffe0";
            button.parentElement.innerHTML = `<strong>Approved ✔️</strong><br><small>Sent to Campus Admin</small>`;
            console.log(`Approved ${type} request sent to Campus Admin.`);
        }

        function denyRequest(button) {
            const row = button.closest('tr');
            row.style.background = "#ffe0e0";
            button.parentElement.innerHTML = `<strong>Denied ❌</strong>`;
        }
    </script>

    <footer>
        &copy; 2025 Mission & Leave Management System
    </footer>
</body>

</html>